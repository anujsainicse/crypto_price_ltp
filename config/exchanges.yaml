# Exchange Configuration for price_ltp

bybit:
  name: "Bybit"
  enabled: true
  services:
    spot:
      enabled: true
      auto_start: true
      websocket_url: "wss://stream.bybit.com/v5/public/spot"
      symbols:
        - "BTCUSDT"
        - "ETHUSDT"
        - "SOLUSDT"
        - "BNBUSDT"
        - "DOGEUSDT"
        - "MNTUSDT"
        - "HYPEUSDT"
      reconnect_interval: 5
      max_reconnect_attempts: 10
      redis_prefix: "bybit_spot"
      # Quote currencies to strip from symbols (order matters - longest first)
      quote_currencies:
        - "USDT"
        - "USDC"
        - "BTC"
        - "ETH"
      # Orderbook configuration
      orderbook_enabled: true
      orderbook_depth: 50
      orderbook_redis_prefix: "bybit_spot_ob"
      # Trades configuration
      trades_enabled: true
      trades_limit: 50
      trades_redis_prefix: "bybit_spot_trades"

    futures_orderbook:
      enabled: true
      auto_start: true
      websocket_url: "wss://stream.bybit.com/v5/public/linear"
      symbols:
        - "BTCUSDT"
        - "ETHUSDT"
        - "SOLUSDT"
        - "BNBUSDT"
        - "DOGEUSDT"
      reconnect_interval: 5
      max_reconnect_attempts: 10
      redis_prefix: "bybit_futures_ob"
      redis_ttl: 60
      quote_currencies:
        - "USDT"
        - "USDC"
      orderbook_depth: 50

    options:
      enabled: true
      auto_start: true

      # API endpoints
      websocket_url: "wss://stream.bybit.com/v5/public/option"
      rest_api_url: "https://api.bybit.com/v5/market/instruments-info"

      # Symbol selection (empty = auto-discover all available base coins)
      base_coins: []
      use_dynamic_base_coin_discovery: true
      subscribe_all: false
      max_symbols_per_asset: 100  # Top 100 by OI per underlying
      max_active_symbols: 1000

      # Subscription behavior
      subscription_batch_size: 50
      subscription_batch_delay: 0.2
      symbol_refresh_interval: 3600  # 1 hour

      # Connection settings
      reconnect_interval: 5
      max_reconnect_attempts: 10

      # Redis storage
      redis_prefix: "bybit_options"
      redis_ttl: 60

      # Optional orderbook (disabled by default - ticker data only)
      orderbook_enabled: false
      orderbook_depth: 25
      orderbook_redis_prefix: "bybit_options_ob"

coindcx:
  name: "CoinDCX"
  enabled: true
  services:
    spot:
      enabled: true
      auto_start: true
      websocket_url: "wss://stream.coindcx.com"
      symbols:
        - "KC-BTC_USDT"
        - "KC-ETH_USDT"
        - "KC-SOL_USDT"
        - "KC-BNB_USDT"
        - "KC-DOGE_USDT"
      reconnect_interval: 5
      max_reconnect_attempts: 10
      redis_prefix: "coindcx_spot"
      redis_ttl: 60
      quote_currencies:
        - "USDT"
        - "USDC"
      # Orderbook configuration
      orderbook_enabled: true
      orderbook_depth: 20
      orderbook_redis_prefix: "coindcx_spot_ob"
      # Trades configuration
      trades_enabled: true
      trades_limit: 50
      trades_redis_prefix: "coindcx_spot_trades"

    # NEW: Unified REST-based futures service (replaces futures_ltp and funding_rate)
    futures_rest:
      enabled: true
      auto_start: true
      # API endpoints
      ltp_api_url: "https://public.coindcx.com/market_data/v3/current_prices/futures/rt"
      orderbook_api_url: "https://public.coindcx.com/market_data/orderbook"
      trades_api_url: "https://public.coindcx.com/market_data/trade_history"
      funding_api_url: "https://futures.coindcx.com/exchange/v1/funding_rate/v2"
      # Polling intervals (seconds)
      ltp_interval: 1
      orderbook_interval: 1
      trades_interval: 2
      funding_interval: 1800
      # Symbols (B- prefix = Binance-backed futures)
      symbols:
        - "B-BTC_USDT"
        - "B-ETH_USDT"
        - "B-SOL_USDT"
        - "B-BNB_USDT"
        - "B-DOGE_USDT"
      # Symbol parsing configuration
      symbol_prefix: "B-"
      quote_currencies:
        - "USDT"
        - "USDC"
        - "USD"
      # Redis configuration
      redis_prefix: "coindcx_futures"
      orderbook_redis_prefix: "coindcx_futures_ob"
      trades_redis_prefix: "coindcx_futures_trades"
      redis_ttl: 60
      # Data limits
      orderbook_depth: 50
      trades_limit: 50
      # HTTP settings
      api_timeout: 10
      max_connections: 10

    # DEPRECATED: Socket.IO-based LTP service (replaced by futures_rest)
    futures_ltp:
      enabled: false
      auto_start: false
      websocket_url: "wss://stream.coindcx.com"
      symbols:
        - "B-BTC_USDT"
        - "B-ETH_USDT"
        - "B-SOL_USDT"
        - "B-BNB_USDT"
        - "B-DOGE_USDT"
      reconnect_interval: 5
      max_reconnect_attempts: 10
      redis_prefix: "coindcx_futures"
      redis_ttl: 60

    # DEPRECATED: Funding rate service (replaced by futures_rest)
    funding_rate:
      enabled: false
      auto_start: false
      api_url: "https://public.coindcx.com/market_data/v3/current_prices/futures/rt"
      update_interval: 1800  # 30 minutes
      symbols:
        - "B-BTC_USDT"
        - "B-ETH_USDT"
        - "B-SOL_USDT"
        - "B-BNB_USDT"
        - "B-DOGE_USDT"
      redis_prefix: "coindcx_futures"
      api_timeout: 10
      redis_ttl: 60

delta:
  name: "Delta Exchange India"
  enabled: true
  services:
    futures_ltp:
      enabled: true
      auto_start: true
      websocket_url: "wss://socket.india.delta.exchange"
      symbols:
        - "BTCUSD"
        - "ETHUSD"
        - "SOLUSD"
        - "BNBUSD"
        - "DOGEUSD"
      reconnect_interval: 5
      max_reconnect_attempts: 10
      redis_prefix: "delta_futures"
      redis_ttl: 60
      # Quote currencies for symbol parsing
      quote_currencies:
        - "USD"
        - "USDT"
      # Orderbook configuration
      orderbook_enabled: true
      orderbook_depth: 50
      orderbook_redis_prefix: "delta_futures_ob"
      # Trades configuration
      trades_enabled: true
      trades_limit: 50
      trades_redis_prefix: "delta_futures_trades"

    options:
      enabled: true
      auto_start: true
      websocket_url: "wss://socket.india.delta.exchange"
      # Dynamic symbol discovery - fetches valid symbols from REST API
      use_dynamic_discovery: true
      underlying_assets:
        - "BTC"
        - "ETH"
      # Subscribe to ALL available options (no filtering)
      subscribe_all: true
      # Batch subscription settings (for handling many symbols efficiently)
      subscription_batch_size: 50  # Subscribe N symbols per batch message
      subscription_batch_delay: 0.2  # Delay between batches (seconds)
      symbol_refresh_interval: 3600  # Refresh symbols every hour (options expire)
      reconnect_interval: 5
      max_reconnect_attempts: 10
      # Redis - LTP/Ticker
      redis_prefix: "delta_options"
      redis_ttl: 60
      # Orderbook configuration
      orderbook_enabled: true
      orderbook_depth: 50
      orderbook_redis_prefix: "delta_options_ob"
      # Trades configuration
      trades_enabled: true
      trades_limit: 50
      trades_redis_prefix: "delta_options_trades"

    spot:
      enabled: true
      auto_start: true
      websocket_url: "wss://socket.india.delta.exchange"
      symbols:
        - "BTCUSD"
        - "ETHUSD"
        - "SOLUSD"
        - "BNBUSD"
        - "DOGEUSD"
      reconnect_interval: 5
      max_reconnect_attempts: 10
      redis_prefix: "delta_spot"
      redis_ttl: 60
      quote_currencies:
        - "USDT"
        - "USD"
      # Orderbook configuration
      orderbook_enabled: true
      orderbook_depth: 50
      orderbook_redis_prefix: "delta_spot_ob"
      # Trades configuration
      trades_enabled: true
      trades_limit: 50
      trades_redis_prefix: "delta_spot_trades"

hyperliquid:
  name: "HyperLiquid"
  enabled: true
  services:
    spot:
      enabled: true
      auto_start: true
      websocket_url: "wss://api.hyperliquid.xyz/ws"
      symbols:
        - "BTC"
        - "ETH"
        - "SOL"
        - "BNB"
        - "DOGE"
      reconnect_interval: 5
      max_reconnect_attempts: 10
      redis_prefix: "hyperliquid_spot"
      redis_ttl: 60
      # Orderbook configuration
      orderbook_enabled: true
      orderbook_depth: 50
      orderbook_redis_prefix: "hyperliquid_spot_ob"
      # Trades configuration
      trades_enabled: true
      trades_limit: 50
      trades_redis_prefix: "hyperliquid_spot_trades"

    perpetual:
      enabled: true
      auto_start: true
      websocket_url: "wss://api.hyperliquid.xyz/ws"
      symbols:
        - "BTC"
        - "ETH"
        - "SOL"
        - "BNB"
        - "DOGE"
      reconnect_interval: 5
      max_reconnect_attempts: 10
      redis_prefix: "hyperliquid_futures"
      redis_ttl: 60
      # Orderbook configuration
      orderbook_enabled: true
      orderbook_depth: 50
      orderbook_redis_prefix: "hyperliquid_futures_ob"
      # Trades configuration
      trades_enabled: true
      trades_limit: 50
      trades_redis_prefix: "hyperliquid_futures_trades"

bybit_spot_testnet:
  name: "Bybit Spot TestNet"
  enabled: true
  services:
    spot:
      enabled: true
      auto_start: true
      websocket_url: "wss://stream-testnet.bybit.com/v5/public/spot"
      symbols:
        - "BTCUSDT"
        - "ETHUSDT"
        - "SOLUSDT"
        - "BNBUSDT"
        - "DOGEUSDT"
        - "MNTUSDT"
        - "HYPEUSDT"
      reconnect_interval: 5
      max_reconnect_attempts: 10
      redis_prefix: "bybit_spot_testnet"
      redis_ttl: 60
      quote_currencies:
        - "USDT"
        - "USDC"
        - "BTC"
        - "ETH"
